<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Birthday Card</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.11/dist/html-to-image.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&family=Comic+Neue:wght@700&family=Great+Vibes&family=Inter:wght@500;700&family=Quicksand:wght@600&display=swap" rel="stylesheet">
  <style>
    body { font-family: Inter, sans-serif; }
    .card { perspective: 1000px; }
    .card-inner { transition: transform 0.6s; transform-style: preserve-3d; }
    .card.flipped .card-inner { transform: rotateY(180deg); }
    .card-side { backface-visibility: hidden; }
    .card-back { transform: rotateY(180deg); }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 p-6">
  <div class="max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-[300px,1fr] gap-6">

    <!-- Controls -->
    <div class="bg-white p-4 rounded-2xl shadow space-y-4">
      <h2 class="text-xl font-bold flex items-center gap-2">🎉 Birthday Card Maker</h2>

      <div>
        <label class="block mb-1">Recipient</label>
        <input id="recipient" class="w-full p-2 border rounded" value="Bestie" />
      </div>

      <div>
        <label class="block mb-1">Headline</label>
        <input id="headline" class="w-full p-2 border rounded" value="Happy Birthday!" />
      </div>

      <div>
        <label class="block mb-1">Message</label>
        <textarea id="message" class="w-full p-2 border rounded" rows="3">Wishing you a day filled with laughter, love, and cake!</textarea>
      </div>

      <div>
        <label class="block mb-1">Sender</label>
        <input id="sender" class="w-full p-2 border rounded" value="— from Rahul" />
      </div>

      <div>
        <label class="block mb-1">Font</label>
        <select id="font" class="w-full p-2 border rounded">
          <option value="'Baloo 2', sans-serif">Playful</option>
          <option value="'Great Vibes', cursive">Elegant Script</option>
          <option value="'Quicksand', sans-serif">Rounded</option>
          <option value="Inter, sans-serif" selected>Clean</option>
          <option value="'Comic Neue', cursive">Comic</option>
        </select>
      </div>

      <div>
        <label class="flex items-center gap-2"><input id="stickers" type="checkbox" checked /> Stickers</label>
        <label class="flex items-center gap-2 mt-1"><input id="flip" type="checkbox" /> Show inside</label>
      </div>

      <div>
        <label class="block mb-1">Upload Photo</label>
        <input id="photo" type="file" accept="image/*" />
      </div>

      <div class="flex flex-wrap gap-2 pt-2">
        <button id="reset" class="px-3 py-1 border rounded">🔄 Reset</button>
        <button id="download" class="px-3 py-1 bg-blue-500 text-white rounded">⬇️ PNG</button>
        <button id="print" class="px-3 py-1 border rounded">🖨 Print</button>
      </div>
    </div>

    <!-- Preview -->
    <div>
      <h2 class="mb-2 text-lg font-medium">✨ Preview (<span id="side">Front</span>)</h2>

      <div id="card" class="card w-full max-w-3xl aspect-[7/5] mx-auto">
        <div class="card-inner relative w-full h-full rounded-2xl shadow-xl bg-gradient-to-br from-pink-100 to-blue-100" id="cardInner">

          <!-- FRONT -->
          <div class="card-side absolute inset-0 flex flex-col items-center justify-center text-center p-6">
            <div id="stickersFront"></div>
            <div class="bg-white/70 px-3 py-1 rounded mb-4">For <span id="recipientText">Bestie</span></div>
            <h1 id="headlineText" class="text-4xl font-bold text-pink-600">Happy Birthday!</h1>
            <img id="photoPreview" class="hidden mt-3 h-32 w-32 object-cover rounded-lg border shadow" />
          </div>

          <!-- INSIDE -->
          <div class="card-side card-back absolute inset-0 flex flex-col justify-between p-6">
            <div id="stickersBack"></div>
            <div>
              <div class="bg-white/70 px-3 py-1 rounded">Dear <span id="recipientInside">Bestie</span>,</div>
              <p id="messageText" class="mt-4 text-base leading-relaxed">Wishing you a day filled with laughter, love, and cake!</p>
            </div>
            <p id="senderText" class="text-right font-semibold">— from Rahul</p>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
const recipient = document.getElementById("recipient");
const headline = document.getElementById("headline");
const message = document.getElementById("message");
const sender = document.getElementById("sender");
const font = document.getElementById("font");
const stickers = document.getElementById("stickers");
const flip = document.getElementById("flip");
const photoInput = document.getElementById("photo");

const recipientText = document.getElementById("recipientText");
const recipientInside = document.getElementById("recipientInside");
const headlineText = document.getElementById("headlineText");
const messageText = document.getElementById("messageText");
const senderText = document.getElementById("senderText");
const photoPreview = document.getElementById("photoPreview");

const card = document.getElementById("card");
const cardInner = document.getElementById("cardInner");
const sideLabel = document.getElementById("side");
const stickersFront = document.getElementById("stickersFront");
const stickersBack = document.getElementById("stickersBack");

function update() {
  recipientText.textContent = recipient.value;
  recipientInside.textContent = recipient.value;
  headlineText.textContent = headline.value;
  messageText.textContent = message.value;
  senderText.textContent = sender.value;
  cardInner.style.fontFamily = font.value;
  sideLabel.textContent = flip.checked ? "Inside" : "Front";
  if (flip.checked) card.classList.add("flipped"); else card.classList.remove("flipped");
  stickersFront.innerHTML = stickers.checked ? "🎂 🎉 🎈" : "";
  stickersBack.innerHTML = stickers.checked ? "💝 🎊 🍰" : "";
}

recipient.addEventListener("input", update);
headline.addEventListener("input", update);
message.addEventListener("input", update);
sender.addEventListener("input", update);
font.addEventListener("change", update);
stickers.addEventListener("change", update);
flip.addEventListener("change", update);

photoInput.addEventListener("change", async (e) => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    photoPreview.src = reader.result;
    photoPreview.classList.remove("hidden");
  };
  reader.readAsDataURL(file);
});

// Reset
 document.getElementById("reset").addEventListener("click", () => {
  recipient.value = "Bestie";
  headline.value = "Happy Birthday!";
  message.value = "Wishing you a day filled with laughter, love, and cake!";
  sender.value = "— from Rahul";
  font.value = "Inter, sans-serif";
  stickers.checked = true;
  flip.checked = false;
  photoPreview.classList.add("hidden");
  update();
 });

// Download PNG
 document.getElementById("download").addEventListener("click", () => {
  htmlToImage.toPng(cardInner).then((dataUrl) => {
    const link = document.createElement("a");
    link.download = `birthday-card-${Date.now()}.png`;
    link.href = dataUrl;
    link.click();
  });
 });

// Print
 document.getElementById("print").addEventListener("click", () => {
  const w = window.open("", "_blank");
  w.document.write(`<!doctype html><html><head><title>Birthday Card</title></head><body>${cardInner.outerHTML}</body></html>`);
  w.document.close();
  w.print();
 });

update();
</script>
</body>
</html>
